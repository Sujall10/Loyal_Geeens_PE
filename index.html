<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Peter England | Men's Fashion & Apparel</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- GSAP for Animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts - Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,400&display=swap" rel="stylesheet">

    <style>
        :root {
            --cursor-size: 20px;
            --cursor-hover-size: 64px;
            --pe-blue: #002349;
            --pe-gold: #c6a87c;
            --bg-off-white: #fbfbfb;
        }

        /* Use Poppins across the site (modern, clean) */
        body, h1, h2, h3, h4, h5, p, a, button, input, select {
            font-family: 'Poppins', sans-serif;
        }

        body {
            overflow-x: hidden;
            background-color: #ffffff;
            color: #111827;
            cursor: none; /* custom cursor */
            -webkit-font-smoothing: antialiased;
        }

        .serif {
            /* keep subtle weight variety but still use Poppins */
            font-weight: 600;
            letter-spacing: -0.02em;
        }

        /* Cursor */
        .cursor-dot,
        .cursor-outline {
            position: fixed;
            top: 0;
            left: 0;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            z-index: 9999;
            pointer-events: none;
        }
        .cursor-dot {
            width: 6px;
            height: 6px;
            background-color: var(--pe-blue);
        }
        .cursor-outline {
            width: var(--cursor-size);
            height: var(--cursor-size);
            border: 1px solid rgba(0, 35, 73, 0.18);
            transition: width 0.18s, height 0.18s, background-color 0.18s, border-color 0.18s;
            backdrop-filter: blur(2px);
        }
        body.hovering .cursor-outline {
            width: var(--cursor-hover-size);
            height: var(--cursor-hover-size);
            background-color: rgba(198,168,124,0.06);
            border-color: var(--pe-gold);
            mix-blend-mode: multiply;
        }

        /* Utilities */
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .img-zoom-container { overflow: hidden; }
        .img-zoom-container img { transition: transform 1.1s cubic-bezier(.19,1,.22,1); }
        .img-zoom-container:hover img { transform: scale(1.04); }

        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -6px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--pe-blue);
            transition: width 0.32s cubic-bezier(.4,0,.2,1);
        }
        .nav-link:hover::after { width: 40%; }

        /* Page transitions */
        #app-container { opacity: 0; visibility: hidden; transition: opacity 0.45s ease; }
        #app-container.loaded { opacity: 1; visibility: visible; }

        /* Mobile Menu */
        #mobile-menu { transform: translateX(-100%); transition: transform 0.45s cubic-bezier(.77,0,.175,1); }
        #mobile-menu.open { transform: translateX(0); }

        /* Toast (generic) */
        #toast { transform: translateY(100%); opacity: 0; transition: all 0.36s cubic-bezier(.175,.885,.32,1.275); }
        #toast.show { transform: translateY(0); opacity: 1; }

        /* Loader */
        #loader { position: fixed; inset: 0; background: #fff; z-index: 10000; display:flex; justify-content:center; align-items:center; flex-direction:column; }
        .loader-bar { width: 0%; height: 3px; background: var(--pe-blue); transition: width 0.6s ease; border-radius:2px; }

        ::selection { background: rgba(198,168,124,0.28); color: var(--pe-blue); }

        /* subtle card shadow for premium feel */
        .premium-card { box-shadow: 0 8px 30px rgba(8,15,30,0.06); border-radius: 14px; }

        /* responsive heading tweaks */
        .hero-title { font-weight:700; letter-spacing:-0.02em; }
    </style>
</head>
<body class="antialiased selection:bg-orange-100 selection:text-orange-900">

    <!-- Custom Cursor -->
    <div class="cursor-dot hidden md:block"></div>
    <div class="cursor-outline hidden md:block"></div>

    <!-- Loader -->
    <div id="loader">
        <h1 class="text-2xl md:text-4xl font-bold tracking-[0.18em] mb-6 text-[#002349] animate-pulse">PETER ENGLAND</h1>
        <div class="w-48 md:w-64 h-[3px] bg-gray-100 overflow-hidden rounded">
            <div class="loader-bar h-full"></div>
        </div>
    </div>

    <!-- Toast (generic) -->
    <div id="toast" class="fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] bg-[#002349] text-white px-6 py-3 rounded shadow-2xl flex items-center gap-3 min-w-[280px]">
        <i data-lucide="info" class="w-5 h-5 text-[#c6a87c]"></i>
        <span id="toast-message" class="text-sm font-medium tracking-wide">Action performed</span>
    </div>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="fixed inset-0 z-[60] bg-white flex flex-col h-screen w-full md:hidden">
        <div class="flex justify-between items-center p-4 border-b border-gray-100">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8b/Peter_England_logo.png/640px-Peter_England_logo.png" alt="Logo" class="h-6">
            <button onclick="toggleMobileMenu()" class="p-2">
                <i data-lucide="x" class="w-6 h-6 text-[#002349]"></i>
            </button>
        </div>
        <div class="flex flex-col p-8 space-y-6 text-center">
            <a onclick="router.navigate('home')" class="text-2xl font-semibold text-[#002349] hover:text-[#c6a87c]">Home</a>
            <a onclick="router.navigate('catalog', 'shirts')" class="text-2xl font-semibold text-[#002349] hover:text-[#c6a87c]">Shirts</a>
            <a onclick="router.navigate('catalog', 'suits')" class="text-2xl font-semibold text-[#002349] hover:text-[#c6a87c]">Suits</a>
            <a onclick="router.navigate('about')" class="text-2xl font-semibold text-[#002349] hover:text-[#c6a87c]">About</a>
            <a onclick="router.navigate('lookbook')" class="text-2xl font-semibold text-[#002349] hover:text-[#c6a87c]">Lookbook</a>
            <a onclick="router.navigate('contact')" class="text-2xl font-semibold text-[#002349] hover:text-[#c6a87c]">Contact</a>
        </div>
        <div class="mt-auto bg-gray-50 p-6 space-y-4">
            <a href="mailto:hello@peterengland.example" class="w-full block text-center py-3 border border-[#002349] text-[#002349] uppercase tracking-wider text-xs font-bold rounded">Enquire</a>
            <div class="flex justify-center gap-6 text-gray-400">
                <i data-lucide="instagram" class="w-5 h-5"></i>
                <i data-lucide="facebook" class="w-5 h-5"></i>
                <i data-lucide="twitter" class="w-5 h-5"></i>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav id="navbar" class="fixed w-full z-50 transition-all duration-500 bg-white/95 backdrop-blur-sm border-b border-gray-100/50">
        <div class="max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-20">
                <!-- Mobile Menu Trigger -->
                <button class="md:hidden hoverable p-2" onclick="toggleMobileMenu()">
                    <i data-lucide="menu" class="w-6 h-6 text-[#002349]"></i>
                </button>

                <!-- Logo -->
                <div class="flex-shrink-0 flex items-center cursor-pointer hoverable group" onclick="router.navigate('home')">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8b/Peter_England_logo.png/640px-Peter_England_logo.png" alt="Peter England" class="h-6 md:h-8 object-contain group-hover:opacity-80 transition-opacity">
                </div>

                <!-- Desktop Menu -->
                <div class="hidden md:flex space-x-8 items-center">
                    <a onclick="router.navigate('home')" class="hoverable nav-link relative text-sm font-medium text-gray-900 tracking-[0.06em] cursor-pointer uppercase">Home</a>
                    <a onclick="router.navigate('catalog', 'shirts')" class="hoverable nav-link relative text-sm font-medium text-gray-900 tracking-[0.06em] cursor-pointer uppercase">Shirts</a>
                    <a onclick="router.navigate('catalog', 'suits')" class="hoverable nav-link relative text-sm font-medium text-gray-900 tracking-[0.06em] cursor-pointer uppercase">Suits</a>
                    <a onclick="router.navigate('catalog', 'trousers')" class="hoverable nav-link relative text-sm font-medium text-gray-900 tracking-[0.06em] cursor-pointer uppercase">Trousers</a>
                    <a onclick="router.navigate('about')" class="hoverable nav-link relative text-sm font-medium text-gray-900 tracking-[0.06em] cursor-pointer uppercase">About</a>
                    <a onclick="router.navigate('lookbook')" class="hoverable nav-link relative text-sm font-medium text-gray-900 tracking-[0.06em] cursor-pointer uppercase">Lookbook</a>
                </div>

                <!-- Right: Enquire / Sign In -->
                <div class="flex items-center space-x-4">
                    <a href="mailto:hello@peterengland.example" class="hidden md:inline-flex hoverable items-center gap-2 px-4 py-2 border border-[#002349] text-[#002349] text-xs font-semibold uppercase tracking-wider rounded transition-all">Enquire</a>
                    <button class="hoverable inline-flex items-center gap-2 text-gray-600 hover:text-[#002349] transition-transform hover:scale-105 duration-300" onclick="router.navigate('contact')">
                        <i data-lucide="user" class="w-5 h-5"></i>
                        <span class="hidden lg:inline text-sm">Sign In</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main App Content Area -->
    <main id="app-container" class="pt-20 min-h-screen flex flex-col bg-white">
        <!-- Content injected via JS -->
    </main>

    <!-- Footer -->
    <footer class="bg-[#002349] text-white pt-20 pb-10">
        <div class="max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16">
                <div class="space-y-6">
                    <h3 class="serif text-3xl tracking-wider">Peter England</h3>
                    <p class="text-gray-300 text-sm leading-relaxed max-w-xs">Defining men's fashion since 1889. Tailoring, premium fabrics and contemporary silhouettes for the modern gentleman.</p>
                    <div class="flex items-center gap-3 mt-4">
                        <a href="#" class="text-gray-300 text-sm underline">Wholesale</a>
                        <a href="#" class="text-gray-300 text-sm underline">Press</a>
                    </div>
                </div>
                <div>
                    <h4 class="font-bold mb-6 tracking-[0.12em] text-xs uppercase text-[#c6a87c]">Collections</h4>
                    <ul class="space-y-3 text-gray-300 text-sm">
                        <li><a href="#" class="hover:text-white">New Arrivals</a></li>
                        <li><a href="#" class="hover:text-white">Wedding Edit</a></li>
                        <li><a href="#" class="hover:text-white">Workplace Essentials</a></li>
                        <li><a href="#" class="hover:text-white">Casual Weekend</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-6 tracking-[0.12em] text-xs uppercase text-[#c6a87c]">Support</h4>
                    <ul class="space-y-3 text-gray-300 text-sm">
                        <li><a href="#" class="hover:text-white">Track Order</a></li>
                        <li><a href="#" class="hover:text-white">Returns & Exchange</a></li>
                        <li><a href="#" class="hover:text-white">Size Guide</a></li>
                        <li><a onclick="router.navigate('contact')" class="cursor-pointer hover:text-white">Contact Us</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-6 tracking-[0.12em] text-xs uppercase text-[#c6a87c]">Newsletter</h4>
                    <p class="text-gray-300 text-sm mb-4">Subscribe to receive updates and exclusive invites.</p>
                    <div class="flex border-b border-gray-600 pb-2">
                        <input type="email" placeholder="Enter your email" class="bg-transparent w-full outline-none text-white placeholder-gray-400 text-sm">
                        <button class="text-[#c6a87c] hover:text-white text-xs font-bold uppercase tracking-wider transition-colors">JOIN</button>
                    </div>
                </div>
            </div>

            <div class="border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center text-xs text-gray-300 gap-4">
                <p>&copy; 2025 Peter England. All rights reserved.</p>
                <div class="flex space-x-6">
                    <a class="hoverable cursor-pointer text-gray-300 hover:text-white">Privacy Policy</a>
                    <a class="hoverable cursor-pointer text-gray-300 hover:text-white">Terms of Use</a>
                    <a class="hoverable cursor-pointer text-gray-300 hover:text-white">Sitemap</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript Application Logic -->
    <script>
        // --- DATA STORE (static catalog only) ---
        const db = {
            products: [
                { id: 1, name: "Navy Slim Fit Suit", category: "suits", price: "₹9,999", image: "https://images.unsplash.com/photo-1594938298603-c8148c472997?q=80&w=800&auto=format&fit=crop", tag: "Best Seller" },
                { id: 2, name: "Classic White Formal Shirt", category: "shirts", price: "₹2,499", image: "https://images.unsplash.com/photo-1620012253295-c15cc3fe5d1d?q=80&w=800&auto=format&fit=crop", tag: "New" },
                { id: 3, name: "Charcoal Grey Trousers", category: "trousers", price: "₹2,999", image: "https://images.unsplash.com/photo-1624378439575-d8705ad7ae80?q=80&w=800&auto=format&fit=crop" },
                { id: 4, name: "Beige Linen Blazer", category: "suits", price: "₹7,499", image: "https://images.unsplash.com/photo-1507679799987-c73779587ccf?q=80&w=800&auto=format&fit=crop" },
                { id: 5, name: "Checkered Casual Shirt", category: "shirts", price: "₹1,899", image: "https://images.unsplash.com/photo-1596755094514-f87e34085b2c?q=80&w=800&auto=format&fit=crop" },
                { id: 6, name: "Slim Fit Chinos", category: "trousers", price: "₹2,299", image: "https://images.unsplash.com/photo-1473966968600-fa801b869a1a?q=80&w=800&auto=format&fit=crop", tag: "Trending" },
                { id: 7, name: "Royal Blue Wedding Suit", category: "suits", price: "₹12,999", image: "https://images.unsplash.com/photo-1555066931-4365d14bab8c?q=80&w=800&auto=format&fit=crop" },
                { id: 8, name: "Striped Office Shirt", category: "shirts", price: "₹2,199", image: "https://images.unsplash.com/photo-1589712073990-25272a275464?q=80&w=800&auto=format&fit=crop" },
                { id: 9, name: "Tuxedo Jacket Black", category: "suits", price: "₹14,999", image: "https://images.unsplash.com/photo-1505022610485-0249ba5b3675?q=80&w=800&auto=format&fit=crop", tag: "Exclusive" },
                { id: 10, name: "Oxford Blue Shirt", category: "shirts", price: "₹2,099", image: "https://images.unsplash.com/photo-1598033129183-c4f50c736f10?q=80&w=800&auto=format&fit=crop" },
            ]
        };

        // --- COMPONENTS ---
        const Components = {
            hero: () => `
                <section class="relative w-full h-[86vh] overflow-hidden bg-gray-900 premium-card">
                    <div class="absolute inset-0">
                        <img src="https://images.unsplash.com/photo-1490114538077-0a7f8cb49891?q=80&w=2670&auto=format&fit=crop" 
                             class="w-full h-full object-cover object-top opacity-85 scale-105 transform origin-center" id="hero-img" alt="Hero">
                        <div class="absolute inset-0 bg-gradient-to-b from-black/30 via-black/10 to-transparent"></div>
                    </div>
                    <div class="absolute inset-0 flex flex-col justify-center items-start text-white text-left px-6 md:px-20 max-w-6xl mx-auto z-10">
                        <span class="text-[#c6a87c] text-xs font-semibold tracking-[0.2em] uppercase mb-3 opacity-0 hero-text">The Wedding Collection 2024</span>
                        <h1 class="hero-title text-4xl md:text-6xl lg:text-7xl leading-tight mb-4 opacity-0 hero-text">Elegance Reimagined — For The Moment That Matters</h1>
                        <p class="hero-text opacity-0 text-gray-200 max-w-xl mb-8 text-sm md:text-base leading-relaxed font-light">Impeccable tailoring, fine fabrics and thoughtful detailing. Designed for the modern gentleman who seeks timeless style.</p>
                        <div class="hero-text opacity-0 flex gap-4">
                            <button onclick="router.navigate('catalog')" class="hoverable group relative px-8 md:px-10 py-3 bg-white text-[#002349] font-semibold text-xs tracking-[0.12em] uppercase shadow-lg rounded">Explore Collection</button>
                            <button onclick="router.navigate('lookbook')" class="hoverable group relative px-8 md:px-10 py-3 border border-white text-white font-semibold text-xs tracking-[0.12em] uppercase rounded">View Lookbook</button>
                        </div>
                    </div>
                    <div class="absolute bottom-8 right-8 text-white/60 hidden lg:block">
                        <i data-lucide="chevrons-right" class="w-7 h-7 animate-bounce"></i>
                    </div>
                </section>
            `,

            categories: () => `
                <section class="py-20 bg-[#fcfcfc]">
                    <div class="max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="text-center mb-12 scroll-reveal">
                            <span class="text-[#c6a87c] text-xs font-semibold tracking-[0.2em] uppercase block mb-3">Essentials</span>
                            <h3 class="serif text-3xl md:text-4xl text-[#002349]">Shop By Category</h3>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8">
                            ${['Shirts', 'Suits', 'Trousers', 'Jackets'].map((cat, idx) => `
                                <div class="scroll-reveal group cursor-pointer hoverable relative overflow-hidden" onclick="router.navigate('catalog', '${cat.toLowerCase()}')">
                                    <div class="aspect-[3/4] overflow-hidden mb-5 relative premium-card">
                                        <div class="absolute inset-0 bg-black/0 group-hover:bg-black/12 transition-colors duration-500 z-10"></div>
                                        <img src="${getCategoryImg(cat)}" class="w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110" alt="${cat}">
                                        <div class="absolute bottom-6 left-0 right-0 text-center z-20 translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500">
                                            <span class="inline-block px-4 py-2 bg-white/90 text-[#002349] text-xs font-semibold tracking-wide uppercase">Shop Now</span>
                                        </div>
                                    </div>
                                    <h4 class="text-center text-lg md:text-xl text-gray-900 group-hover:text-[#c6a87c] transition-colors font-medium">${cat}</h4>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                </section>
            `,

            featured: () => `
                <section class="py-16 bg-white">
                    <div class="max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="flex flex-col md:flex-row justify-between items-end mb-8 scroll-reveal gap-4">
                            <div>
                                <h3 class="serif text-2xl md:text-4xl text-[#002349] mb-2">Trending Now</h3>
                                <p class="text-gray-500 font-light">Curated picks for the modern gentleman</p>
                            </div>
                            <button onclick="router.navigate('catalog')" class="hoverable hidden md:flex items-center gap-2 text-[#002349] font-medium text-sm hover:text-[#c6a87c] transition-colors group">
                                View All Products <i data-lucide="arrow-right" class="w-4 h-4 group-hover:translate-x-1 transition-transform"></i>
                            </button>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
                            ${db.products.slice(0, 4).map(product => Components.productCard(product)).join('')}
                        </div>
                        <div class="mt-8 text-center md:hidden">
                             <button onclick="router.navigate('catalog')" class="hoverable px-8 py-3 border border-[#002349] text-[#002349] text-xs font-semibold uppercase tracking-wide w-full rounded">View All</button>
                        </div>
                    </div>
                </section>
            `,

            banner: () => `
                <section class="py-20 bg-[#f7f7f7]">
                    <div class="max-w-[1440px] mx-auto px-4 md:px-8">
                        <div class="relative h-[56vh] md:h-[66vh] w-full overflow-hidden premium-card rounded-lg">
                            <img src="https://images.unsplash.com/photo-1497339100210-9e87df79c218?q=80&w=2670&auto=format&fit=crop" class="absolute inset-0 w-full h-full object-cover rounded-lg" alt="Banner">
                            <div class="absolute inset-0 bg-gradient-to-r from-[#002349]/88 via-[#002349]/60 to-transparent flex items-center rounded-lg">
                                <div class="max-w-2xl mx-auto px-6 md:px-12 w-full">
                                    <div class="text-white scroll-reveal">
                                        <span class="block text-[#c6a87c] text-xs font-semibold tracking-[0.16em] uppercase mb-4">Membership</span>
                                        <h2 class="serif text-3xl md:text-5xl mb-4 leading-tight">The Elite Club</h2>
                                        <p class="text-lg mb-8 text-gray-200 font-light leading-relaxed">Join our loyalty program for exclusive previews, personal styling sessions and early access.</p>
                                        <button onclick="router.navigate('contact')" class="hoverable px-8 py-3 bg-white text-[#002349] font-semibold text-xs tracking-[0.12em] hover:bg-[#c6a87c] hover:text-white transition-colors uppercase rounded">Discover Privileges</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            `,

            catalog: (filter = 'all') => {
                const filtered = filter === 'all' || filter === 'new'
                    ? db.products
                    : db.products.filter(p => p.category === filter);

                return `
                <div class="pt-10 pb-20 max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8 min-h-screen">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-end mb-12 fade-in-up border-b border-gray-100 pb-8">
                        <div>
                            <p class="text-xs text-gray-400 mb-3 uppercase tracking-widest font-semibold">Home / Catalog / ${filter}</p>
                            <h2 class="serif text-3xl md:text-5xl text-[#002349] capitalize">${filter === 'new' ? 'New Arrivals' : filter + ' Collection'}</h2>
                        </div>
                        <div class="mt-6 md:mt-0 flex gap-6 items-center w-full md:w-auto">
                            <span class="text-sm text-gray-500 whitespace-nowrap">${filtered.length} Items</span>
                            <div class="relative w-full md:w-48">
                                <select onchange="router.navigate('catalog', this.value)" class="hoverable appearance-none bg-transparent border-b border-gray-300 py-2 w-full outline-none text-sm cursor-pointer font-medium text-gray-800 focus:border-[#002349] transition-colors">
                                    <option value="all" ${filter === 'all' ? 'selected' : ''}>All Categories</option>
                                    <option value="shirts" ${filter === 'shirts' ? 'selected' : ''}>Shirts</option>
                                    <option value="suits" ${filter === 'suits' ? 'selected' : ''}>Suits</option>
                                    <option value="trousers" ${filter === 'trousers' ? 'selected' : ''}>Trousers</option>
                                </select>
                                <i data-lucide="chevron-down" class="w-4 h-4 absolute right-0 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400"></i>
                            </div>
                        </div>
                    </div>

                    ${filtered.length === 0 ?
                        `<div class="text-center py-28 bg-gray-50 rounded-lg">
                            <p class="text-gray-500 text-lg serif">No products found in this category.</p>
                            <button onclick="router.navigate('catalog')" class="mt-4 text-[#002349] underline hover:text-[#c6a87c]">View all products</button>
                        </div>` :
                        `<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-8 gap-y-12">
                            ${filtered.map(p => Components.productCard(p)).join('')}
                        </div>`
                    }
                </div>
                `;
            },

            productCard: (product) => `
                <div class="group cursor-pointer hoverable scroll-reveal flex flex-col h-full premium-card p-4" onclick="router.navigate('product', ${product.id})">
                    <div class="relative overflow-hidden aspect-[3/4] mb-5 bg-gray-100 rounded-lg">
                        ${product.tag ? `<span class="absolute top-3 left-3 bg-[#002349] text-white text-[10px] font-semibold px-3 py-1.5 uppercase tracking-wider z-10 rounded">${product.tag}</span>` : ''}
                        <img src="${product.image}" alt="${product.name}" class="w-full h-full object-cover transition-transform duration-1000 ease-out group-hover:scale-105 rounded-lg">
                    </div>
                    <div class="mt-auto">
                        <h3 class="text-base text-gray-900 group-hover:text-[#002349] transition-colors font-semibold leading-snug">${product.name}</h3>
                        <div class="flex justify-between items-center mt-3 border-t border-gray-100 pt-3">
                            <p class="text-sm text-gray-500 italic">${product.price}</p>
                            <span class="text-xs text-[#c6a87c] font-semibold uppercase tracking-wide">View Details</span>
                        </div>
                    </div>
                </div>
            `,

            productDetail: (id) => {
                const product = db.products.find(p => p.id == id);
                if (!product) return `<div class="pt-32 text-center text-xl serif">Product not found</div>`;

                return `
                <div class="max-w-[1200px] mx-auto px-4 sm:px-6 lg:px-8 py-12 min-h-screen">
                    <div class="mb-6 fade-in-up">
                        <button onclick="window.history.back()" class="hoverable inline-flex items-center text-xs font-semibold tracking-widest text-gray-500 hover:text-[#002349] uppercase group">
                            <i data-lucide="arrow-left" class="w-4 h-4 mr-2 group-hover:-translate-x-1 transition-transform"></i> Back to Catalog
                        </button>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 lg:gap-16">
                        <div class="lg:col-span-7 grid grid-cols-1 md:grid-cols-2 gap-4 fade-in-up">
                            <div class="md:col-span-2 aspect-[4/5] img-zoom-container cursor-crosshair bg-gray-100 relative overflow-hidden rounded-lg">
                                <img src="${product.image}" class="w-full h-full object-cover" alt="${product.name}">
                                <div class="absolute inset-0 pointer-events-none flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                                    <span class="bg-white/80 backdrop-blur px-3 py-1 text-xs uppercase tracking-wider">Hover to Zoom</span>
                                </div>
                            </div>
                            <div class="aspect-square bg-gray-100 overflow-hidden cursor-pointer img-zoom-container rounded-lg">
                                <img src="${product.image}" class="w-full h-full object-cover grayscale hover:grayscale-0 transition-all duration-500" alt="Detail 1">
                            </div>
                            <div class="aspect-square bg-gray-100 overflow-hidden cursor-pointer img-zoom-container rounded-lg">
                                <img src="https://images.unsplash.com/photo-1516257984-b1b4d8c9230c?q=80&w=800&auto=format&fit=crop" class="w-full h-full object-cover grayscale hover:grayscale-0 transition-all duration-500" alt="Detail 2">
                            </div>
                        </div>

                        <div class="lg:col-span-5 fade-in-up" style="animation-delay: 0.2s">
                            <div class="lg:sticky lg:top-28">
                                <span class="text-[#c6a87c] font-semibold tracking-[0.12em] text-xs uppercase mb-4 block">Peter England Premium</span>
                                <h1 class="text-3xl md:text-4xl text-[#002349] mb-4 leading-tight">${product.name}</h1>
                                <p class="text-2xl text-gray-600 mb-6 font-semibold">${product.price}</p>

                                <div class="prose text-gray-600 mb-6 leading-relaxed font-light text-sm md:text-base">
                                    <p>Expertly crafted for everyday comfort and lasting style. Tailored with a focus on silhouette, proportion, and premium fabric selection. Ideal for formal events and workwear.</p>
                                </div>

                                <div class="mb-6">
                                    <div class="flex justify-between items-center mb-3">
                                        <h4 class="text-xs font-semibold uppercase tracking-wider text-gray-900">Available Sizes</h4>
                                        <button onclick="router.navigate('sizeGuide')" class="text-xs text-gray-500 underline hover:text-[#002349] hoverable">Size Guide</button>
                                    </div>
                                    <div class="flex gap-3 flex-wrap">
                                        ${['38', '40', '42', '44', '46'].map((size, i) => `
                                            <button class="hoverable w-12 h-12 border ${i===1 ? 'border-[#002349] bg-[#002349] text-white' : 'border-gray-200 text-gray-700'} flex items-center justify-center hover:border-[#002349] hover:bg-[#002349] hover:text-white transition-all text-sm font-medium rounded">
                                                ${size}
                                            </button>
                                        `).join('')}
                                    </div>
                                </div>

                                <div class="flex gap-4 mb-8">
                                    <button onclick="enquireProduct('${product.name}')" class="hoverable flex-1 bg-[#002349] text-white py-3 font-semibold text-sm uppercase rounded hover:bg-[#1a3a5f] transition-all shadow-lg">Enquire Now</button>
                                    <a href="mailto:hello@peterengland.example?subject=Enquiry%20about%20${encodeURIComponent(product.name)}" class="hoverable w-14 flex items-center justify-center border border-gray-200 hover:border-[#c6a87c] text-gray-600 hover:text-[#c6a87c] rounded">
                                        <i data-lucide="mail"></i>
                                    </a>
                                </div>

                                <div class="border-t border-gray-100 pt-6 space-y-5">
                                    <div class="flex items-start gap-4">
                                        <div class="p-2 bg-gray-50 rounded-full"><i data-lucide="truck" class="w-4 h-4 text-[#002349]"></i></div>
                                        <div>
                                            <h5 class="text-sm font-semibold text-gray-900">Delivery</h5>
                                            <p class="text-xs text-gray-500 mt-1">Free standard shipping on select purchases.</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start gap-4">
                                        <div class="p-2 bg-gray-50 rounded-full"><i data-lucide="award" class="w-4 h-4 text-[#002349]"></i></div>
                                        <div>
                                            <h5 class="text-sm font-semibold text-gray-900">Quality Promise</h5>
                                            <p class="text-xs text-gray-500 mt-1">Designed and inspected with the highest standards.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                `;
            },

            about: () => `
                <section class="py-20 bg-white">
                    <div class="max-w-[1100px] mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                            <div class="scroll-reveal">
                                <h2 class="serif text-3xl md:text-4xl text-[#002349] mb-4">Our Story</h2>
                                <p class="text-gray-600 mb-4">Rooted in heritage, defined by craft. Peter England has been dressing generations with timeless tailoring and modern design language. We blend tradition and innovation to create garments that fit both body and life.</p>
                                <p class="text-gray-600">From fabric sourcing and pattern-making to finishing, every step is measured. Our design ethos is simple: refined silhouettes, considered details, and durable materials to build wardrobe pieces that last.</p>
                            </div>
                            <div class="scroll-reveal">
                                <div class="premium-card p-6 bg-[#fbfbfb] rounded-lg">
                                    <h4 class="text-lg font-semibold text-[#002349] mb-3">What we offer</h4>
                                    <ul class="text-gray-600 space-y-2">
                                        <li>— Bespoke & Tailoring consultations</li>
                                        <li>— Expert fitting and style guidance</li>
                                        <li>— Corporate and wedding packages</li>
                                    </ul>
                                    <div class="mt-6">
                                        <button onclick="router.navigate('contact')" class="hoverable px-6 py-3 bg-[#002349] text-white rounded font-semibold">Book a Consultation</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            `,

            lookbook: () => `
                <section class="py-20 bg-[#fafafa]">
                    <div class="max-w-[1200px] mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="text-center mb-12">
                            <h2 class="serif text-3xl md:text-4xl text-[#002349]">Lookbook</h2>
                            <p class="text-gray-500">A curated selection from our seasonal stories.</p>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <img src="https://images.unsplash.com/photo-1519708227418-c8fd9a32b7a2?q=80&w=1200&auto=format&fit=crop" class="w-full h-72 object-cover rounded-lg premium-card scroll-reveal">
                            <img src="https://images.unsplash.com/photo-1520975917754-9b6a6d2b1b6f?q=80&w=1200&auto=format&fit=crop" class="w-full h-72 object-cover rounded-lg premium-card scroll-reveal">
                            <img src="https://images.unsplash.com/photo-1521335629791-ce4aec67dd49?q=80&w=1200&auto=format&fit=crop" class="w-full h-72 object-cover rounded-lg premium-card scroll-reveal">
                        </div>
                    </div>
                </section>
            `,

            testimonials: () => `
                <section class="py-16 bg-white">
                    <div class="max-w-[960px] mx-auto px-4 sm:px-6 lg:px-8 text-center">
                        <h3 class="serif text-2xl md:text-3xl text-[#002349] mb-6">What our clients say</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="p-6 premium-card rounded-lg">
                                <p class="text-gray-600 mb-4">"Remarkable tailoring and attentive service. My wedding suit was flawless." — Rahul K.</p>
                                <div class="text-sm text-gray-400">Groom</div>
                            </div>
                            <div class="p-6 premium-card rounded-lg">
                                <p class="text-gray-600 mb-4">"Perfect office essentials. The shirts hold up after repeated washes." — Ankit S.</p>
                                <div class="text-sm text-gray-400">Executive</div>
                            </div>
                            <div class="p-6 premium-card rounded-lg">
                                <p class="text-gray-600 mb-4">"Loved the styling session — now my wardrobe feels complete." — Vivek P.</p>
                                <div class="text-sm text-gray-400">Styling Client</div>
                            </div>
                        </div>
                    </div>
                </section>
            `,

            faq: () => `
                <section class="py-12 bg-[#fcfcfc]">
                    <div class="max-w-[900px] mx-auto px-4 sm:px-6 lg:px-8">
                        <h3 class="serif text-2xl text-[#002349] mb-4">FAQ</h3>
                        <div class="space-y-4">
                            <details class="p-4 bg-white rounded-lg premium-card">
                                <summary class="font-medium cursor-pointer">Do you ship internationally?</summary>
                                <p class="mt-2 text-gray-600 text-sm">Yes — we ship to most countries. Delivery times vary by region.</p>
                            </details>
                            <details class="p-4 bg-white rounded-lg premium-card">
                                <summary class="font-medium cursor-pointer">Can I book a fitting?</summary>
                                <p class="mt-2 text-gray-600 text-sm">Absolutely. Use our contact form to book an in-store appointment or a virtual consultation.</p>
                            </details>
                        </div>
                    </div>
                </section>
            `,

            sizeGuide: () => `
                <section class="py-12 bg-white">
                    <div class="max-w-[900px] mx-auto px-4 sm:px-6 lg:px-8">
                        <h3 class="serif text-2xl text-[#002349] mb-4">Size Guide</h3>
                        <p class="text-gray-600 mb-4">Use this guide for approximate sizing. For bespoke fits, we recommend booking a measurement session.</p>
                        <div class="overflow-auto">
                            <table class="w-full text-left">
                                <thead>
                                    <tr>
                                        <th class="text-sm text-gray-500 pb-2">Size (IN)</th>
                                        <th class="text-sm text-gray-500 pb-2">Chest</th>
                                        <th class="text-sm text-gray-500 pb-2">Waist</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr><td class="py-2 text-gray-700">38</td><td class="py-2 text-gray-700">38-39"</td><td class="py-2 text-gray-700">30-31"</td></tr>
                                    <tr><td class="py-2 text-gray-700">40</td><td class="py-2 text-gray-700">40-41"</td><td class="py-2 text-gray-700">32-33"</td></tr>
                                    <tr><td class="py-2 text-gray-700">42</td><td class="py-2 text-gray-700">42-43"</td><td class="py-2 text-gray-700">34-35"</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>
            `,

            storeLocator: () => `
                <section class="py-12 bg-[#fafafa]">
                    <div class="max-w-[1100px] mx-auto px-4 sm:px-6 lg:px-8">
                        <h3 class="serif text-2xl text-[#002349] mb-4">Store Locator</h3>
                        <p class="text-gray-600 mb-6">Find our flagship stores and authorized retailers near you.</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="p-6 premium-card rounded-lg">
                                <h5 class="font-semibold">Mumbai - Marine Lines</h5>
                                <p class="text-sm text-gray-600">Open: 10am - 8pm • +91 22 1234 5678</p>
                            </div>
                            <div class="p-6 premium-card rounded-lg">
                                <h5 class="font-semibold">Delhi - Connaught Place</h5>
                                <p class="text-sm text-gray-600">Open: 10am - 8pm • +91 11 9876 5432</p>
                            </div>
                        </div>
                    </div>
                </section>
            `,

            services: () => `
                <section class="py-12 bg-white">
                    <div class="max-w-[1100px] mx-auto px-4 sm:px-6 lg:px-8">
                        <h3 class="serif text-2xl text-[#002349] mb-4">Services</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="p-6 premium-card rounded-lg">
                                <h5 class="font-semibold mb-2">Bespoke Tailoring</h5>
                                <p class="text-sm text-gray-600">Personal measurements, pattern creation and hand-finished garments.</p>
                            </div>
                            <div class="p-6 premium-card rounded-lg">
                                <h5 class="font-semibold mb-2">Corporate Styling</h5>
                                <p class="text-sm text-gray-600">Uniforms, corporate bulk orders and styling consultations.</p>
                            </div>
                            <div class="p-6 premium-card rounded-lg">
                                <h5 class="font-semibold mb-2">Wedding Packages</h5>
                                <p class="text-sm text-gray-600">Group fittings, custom designs and event deliveries.</p>
                            </div>
                        </div>
                    </div>
                </section>
            `,

            contact: () => `
                <section class="py-16 bg-white">
                    <div class="max-w-[900px] mx-auto px-4 sm:px-6 lg:px-8">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">
                            <div>
                                <h3 class="serif text-3xl text-[#002349] mb-4">Get In Touch</h3>
                                <p class="text-gray-600 mb-6">For inquiries, bespoke appointments or wholesale partnerships, reach out to our team.</p>

                                <div class="space-y-4 text-sm text-gray-700">
                                    <div><strong>Email:</strong> <a href="mailto:hello@peterengland.example" class="underline">hello@peterengland.example</a></div>
                                    <div><strong>Phone:</strong> +91 22 1234 5678</div>
                                    <div><strong>Address:</strong> 14 Fashion Street, Mumbai, India</div>
                                </div>

                                <div class="mt-8">
                                    <button onclick="openMailClient()" class="hoverable px-6 py-3 bg-[#002349] text-white rounded font-semibold">Email Us</button>
                                </div>
                            </div>

                            <div>
                                <form onsubmit="event.preventDefault(); formSubmit()" class="space-y-4 bg-[#fafafa] p-6 rounded-lg premium-card">
                                    <input required type="text" name="name" placeholder="Your name" class="w-full p-3 bg-white rounded border border-gray-200 outline-none">
                                    <input required type="email" name="email" placeholder="Email" class="w-full p-3 bg-white rounded border border-gray-200 outline-none">
                                    <input type="text" name="subject" placeholder="Subject" class="w-full p-3 bg-white rounded border border-gray-200 outline-none">
                                    <textarea name="message" placeholder="Message" rows="4" class="w-full p-3 bg-white rounded border border-gray-200 outline-none"></textarea>
                                    <div class="flex justify-between items-center">
                                        <button type="submit" class="px-6 py-3 bg-[#002349] text-white rounded font-semibold">Send Message</button>
                                        <div class="text-sm text-gray-500">We usually reply within 48 hours.</div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </section>
            `
        };

        // --- HELPERS ---
        function getCategoryImg(cat) {
            const map = {
                'Shirts': 'https://images.unsplash.com/photo-1602810318383-e386cc2a3ccf?q=80&w=800&auto=format&fit=crop',
                'Suits': 'https://images.unsplash.com/photo-1593032465175-481ac7f401a0?q=80&w=800&auto=format&fit=crop',
                'Trousers': 'https://images.unsplash.com/photo-1473966968600-fa801b869a1a?q=80&w=800&auto=format&fit=crop',
                'Jackets': 'https://images.unsplash.com/photo-1559551409-dadc959f76b8?q=80&w=800&auto=format&fit=crop'
            };
            return map[cat] || map['Shirts'];
        }

        // --- TOAST (generic) ---
        function showToast(msg) {
            const toast = document.getElementById('toast');
            const toastMsg = document.getElementById('toast-message');
            toastMsg.innerText = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // Enquiry for product — directs user to contact section and pre-fills subject in mail client.
        function enquireProduct(productName) {
            // scroll to contact section if present, otherwise open mail client
            router.navigate('contact');
            setTimeout(() => openMailClient(`Enquiry about ${productName}`), 600);
        }

        function openMailClient(subject = '') {
            const mailto = `mailto:hello@peterengland.example?subject=${encodeURIComponent(subject || 'General Enquiry')}`;
            window.location.href = mailto;
        }

        function formSubmit() {
            // Static site — just show confirmation toast (in production this would post to server)
            showToast('Thanks — we received your message. We will reply within 48 hours.');
            // optionally clear fields:
            const form = document.querySelector('form');
            if (form) form.reset();
        }

        // --- MOBILE MENU LOGIC ---
        function toggleMobileMenu() {
            const menu = document.getElementById('mobile-menu');
            menu.classList.toggle('open');
            document.body.style.overflow = menu.classList.contains('open') ? 'hidden' : 'auto';
        }

        // --- ROUTER & APP RENDER ---
        const router = {
            navigate: (page, param = null) => {
                const menu = document.getElementById('mobile-menu');
                if (menu.classList.contains('open')) toggleMobileMenu();

                gsap.to('#app-container', {
                    opacity: 0,
                    y: -20,
                    duration: 0.35,
                    ease: "power2.inOut",
                    onComplete: () => {
                        window.scrollTo(0, 0);
                        router.render(page, param);
                        gsap.fromTo('#app-container', { opacity: 0, y: 30, visibility: 'visible' }, { opacity: 1, y: 0, duration: 0.6, ease: "power3.out" });
                    }
                });
            },

            render: (page, param) => {
                const app = document.getElementById('app-container');
                let content = '';

                switch(page) {
                    case 'home':
                        content = Components.hero() + Components.categories() + Components.featured() + Components.banner() + Components.testimonials() + Components.services() + Components.faq();
                        break;
                    case 'catalog':
                        content = Components.catalog(param || 'all');
                        break;
                    case 'product':
                        content = Components.productDetail(param);
                        break;
                    case 'about':
                        content = Components.about();
                        break;
                    case 'lookbook':
                        content = Components.lookbook();
                        break;
                    case 'contact':
                        content = Components.contact();
                        break;
                    case 'testimonials':
                        content = Components.testimonials();
                        break;
                    case 'sizeGuide':
                        content = Components.sizeGuide();
                        break;
                    case 'storeLocator':
                        content = Components.storeLocator();
                        break;
                    default:
                        content = Components.hero() + Components.categories() + Components.featured();
                }

                app.innerHTML = content;
                lucide.createIcons();
                initAnimations();
            }
        };

        // --- ANIMATIONS ---
        function initAnimations() {
            // Scroll reveal for elements with .scroll-reveal
            gsap.utils.toArray('.scroll-reveal').forEach(elem => {
                gsap.fromTo(elem, { opacity: 0, y: 40 }, {
                    scrollTrigger: { trigger: elem, start: "top 85%" },
                    opacity: 1,
                    y: 0,
                    duration: 0.9,
                    ease: "power3.out",
                    stagger: 0.12
                });
            });

            // hero animation
            if (document.querySelector('.hero-text')) {
                const tl = gsap.timeline();
                tl.to('.hero-text', {
                    opacity: 1,
                    y: 0,
                    duration: 1,
                    stagger: 0.12,
                    ease: "power3.out",
                    delay: 0.08
                });
                gsap.to("#hero-img", {
                    scrollTrigger: { trigger: "body", start: "top top", end: "bottom top", scrub: true },
                    y: 120,
                    scale: 1.06,
                    ease: "none"
                });
            }

            // subtle floating for premium cards
            gsap.utils.toArray('.premium-card').forEach((card, i) => {
                gsap.fromTo(card, { y: 6 }, {
                    y: 0,
                    duration: 1.8,
                    ease: "sine.inOut",
                    repeat: -1,
                    yoyo: true,
                    delay: i * 0.15,
                    opacity: 1
                });
            });
        }

        // Cursor control
        const cursorDot = document.querySelector('.cursor-dot');
        const cursorOutline = document.querySelector('.cursor-outline');

        window.addEventListener('mousemove', (e) => {
            const posX = e.clientX;
            const posY = e.clientY;
            if (cursorDot) {
                cursorDot.style.left = `${posX}px`;
                cursorDot.style.top = `${posY}px`;
            }
            if (cursorOutline) {
                cursorOutline.animate({ left: `${posX}px`, top: `${posY}px` }, { duration: 480, fill: "forwards" });
            }
        });

        document.body.addEventListener('mouseover', (e) => {
            if (e.target.closest('.hoverable')) document.body.classList.add('hovering');
            else document.body.classList.remove('hovering');
        });

        // --- INITIALIZATION ---
        window.addEventListener('load', () => {
            const loader = document.getElementById('loader');
            const bar = document.querySelector('.loader-bar');

            setTimeout(() => bar.style.width = "100%", 120);
            setTimeout(() => {
                gsap.to(loader, { yPercent: -110, duration: 0.9, ease: "power4.inOut", onComplete: () => {
                    router.render('home');
                    document.getElementById('app-container').classList.add('loaded');
                }});
            }, 900);
        });

        // Navbar Scroll Effect
        window.addEventListener('scroll', () => {
            const nav = document.getElementById('navbar');
            if (window.scrollY > 50) {
                nav.classList.add('shadow-md');
                nav.classList.add('bg-white');
                nav.classList.remove('bg-white/95');
                nav.classList.replace('h-20', 'h-16');
            } else {
                nav.classList.remove('shadow-md');
                nav.classList.remove('bg-white');
                nav.classList.add('bg-white/95');
                nav.classList.replace('h-16', 'h-20');
            }
        });

        // Initial icon rendering
        lucide.createIcons();
    </script>
</body>
</html>
